/*
----------------------
COPYRIGHT NOTICE
---------------------

ActiveQuery JS v25.6.0 
Copyright (c) 2018-Present Syed Kazmi 
License: Open Software License 3.0 (OSL-3.0) 
Author: Syed Kazmi 
URL: https://github.com/ActiveQuery/JS

"ActiveQuery" is synonymous with, and wherever referenced as, "Active Query" or "ActiveQ" or 
"AQ", whether uppercased, lowercased or capitalised. This applies to all parts of 
ActiveQuery namespaces, projects, programmes, repositories, and spaces.

This "ActiveQuery JS" software is released under the terms and conditions of the Open Software 
License version 3.0 (the "License"). Please refer to the License for the specific language 
governing permissions and limitations. You should have received a copy of the License along with 
this source file. If not, visit one of the following links:
 
https://github.com/ActiveQuery/JS/blob/main/LICENSE.txt 
http://opensource.org/licenses/osl-3.0.php

-------------------------------
THIRD PARTY LICENSE/NOTICE
-------------------------------

Array.sortBy Function v1.2.2, Licensed under MIT License
https://github.com/eneko/Array.sortBy

isJSON Function version 2.0.1, Licensed under ISC License
https://github.com/joaquimserafim/is-json

*/

export const ActiveQuery=Object.freeze(class{constructor(t=null){this.initlog=[],this.DOM=ActiveQuery.DOM,this.nestedDOM=ActiveQuery.nestedDOM,this.extend=ActiveQuery.extend,this.isEmpty=ActiveQuery.isEmpty,this.exit=ActiveQuery.exit,this.extend=ActiveQuery.extend,this.keepOn=ActiveQuery.keepOn,/[a-z$]/.test(t)&&(window[t]=ActiveQuery.DOM,Element.prototype[`${t+t}`]=ActiveQuery.nestedDOM,NodeList.prototype[`${t+t}`]=ActiveQuery.nestedDOM,Object.prototype[`${t+t}`]=ActiveQuery.nestedDOM),document.addEventListener("readystatechange",t=>{if("complete"==t.target.readyState)for(let t=0;t<this.initlog.length;t++)"function"==typeof this.initlog[t]&&this.initlog[t]()})}static DOM(t){let e;switch(e=document.querySelectorAll(t),e.length){case 0:return null;case 1:return e[0];default:return e}}static nestedDOM(t){if(!t||"string"!=typeof t)return this;if(!(this instanceof Element||this instanceof Document||this instanceof NodeList||this instanceof HTMLCollection))return this;if(this.querySelectorAll){const e=this.querySelectorAll(t);return 0===e.length?this:1===e.length?e[0]:e}if(NodeList.prototype.isPrototypeOf(this)||Array.isArray(this)){const e=[];for(let n=0;n<this.length;n++){const i=this[n];if(i&&i.querySelectorAll){const n=i.querySelectorAll(t);if(1===n.length)e.push(n[0]);else if(n.length>1)for(let t=0;t<n.length;t++)e.push(n[t])}}return 0===e.length?this:1===e.length?e[0]:e}return this}defer(t){let e,n;return e=[...t],n=1e3*e.pop(),setTimeout(e,n)}static extend(...t){if("string"==typeof t[0])switch(t[0].toLowerCase()){case"dom":t[2].toString().includes("class")&&/^[a-z][a-z-]*[a-z]$/.test(t[1])&&(/\bHTMLElement\b/.test(t[2].__proto__.name)&&customElements.define(t[1],t[2]),/\bHTML.[a-zA-Z]*Element\b/.test(t[2].__proto__.name)&&/^[a-z]*$/.test(t[3])&&customElements.define(t[1],t[2],{extends:t[3]}));break;case"htmltag":"string"==typeof t[1]&&t[2].toString().includes("class")&&"string"==typeof t[3]&&customElements.define(t[1],t[2],{extends:t[3]});break;case"element":t[1].constructor===Object&&Object.defineProperties(Element.prototype,t[1]);break;case"nodelist":t[1].constructor===Object&&Object.defineProperties(NodeList.prototype,t[1]);break;case"object":t[1].constructor===Object&&Object.defineProperties(Object.prototype,t[1]);break;case"window":t[1].constructor===Object&&Object.defineProperties(Window.prototype,t[1]);break;case"array":t[1].constructor===Object&&Object.defineProperties(Array.prototype,t[1]);break;case"string":t[1].constructor===Object&&Object.defineProperties(String.prototype,t[1]);break;case"number":t[1].constructor===Object&&Object.defineProperties(Number.prototype,t[1]);break;case"function":t[1].constructor===Object&&Object.defineProperties(Function.prototype,t[1]);break;case"navigator":t[1].constructor===Object&&Object.defineProperties(Navigator.prototype,t[1]);break;case"document":t[1].constructor===Object&&Object.defineProperties(Document.prototype,t[1]);break;case"ActiveQ":t[1].constructor===Object&&Object.defineProperties(ActiveQuery.prototype,t[1]);break;default:"function"==typeof t[1]&&t[2].constructor===Object&&Object.defineProperties(t[1].prototype,t[2])}return this}isArray(t){return!!t&&Array.isArray(t)}isNaA(t){return!(t&&Array.isArray(t))}isArraySet(t){return!!t&&t instanceof Set}isNaAS(t){return!(t&&t instanceof Set)}isObjectMap(t){return!!t&&t instanceof Map}isNaOM(t){return!(t&&t instanceof Map)}isArrayLike(t){return!!t&&(isArray(t)||isArraySet(t)||isNodeList(t))}isNaAL(t){return!(t&&(isArray(t)||isArraySet(t)||isNodeList(t)))}isString(t){return"string"==typeof t||t instanceof String}isNaS(t){return"string"!=typeof t||!(t instanceof String)}isObject(t){return!!t&&t.constructor===Object}isNaO(t){return!(t&&t.constructor===Object)}isObjectLiteral(t){let e=Object.getOwnPropertyNames(t);return!(!t||"object"!=typeof t||["Number","String","Boolean","Symbol"].includes(t.constructor.name)||e.includes("length")||e.includes("prototype")||e.includes("stringify"))}isNaM(t){return!(t&&t instanceof Map)}isObjectLike(t){return!!t&&(isObject(t)||isObjectMap())}isNaOL(t){return!(t&&(isObject(t)||isObjectMap()))}isFunction(t){return!!t&&/function|()=>/.test(t.toString())}isNaF(t){return!(t&&/function|()=>/.test(t.toString()))}isClass(t){return!!t&&t.toString().includes("class")}isNaC(t){return!(t&&t.toString().includes("class"))}isNodeList(t){return!!t&&/\bobject HTML.*Element\b|object HTMLCollection|object NodeList/.test(x.toString())}isNaNL(t){return!(t&&/\bobject HTML.*Element\b|object HTMLCollection|object NodeList/.test(x.toString()))}isSet(t){return!(!Array.isArray(t)||/^\s*$|null|undefined/.test(t))}isArgument(t){return!/^\s*$|undefined/.test(t)}isJSON(t){return!(/^\s*$|undefined/.test(t)||!/number|object|array|string|boolean/.test(typeof t))}static isEmpty(t,e=[]){if(!Array.isArray(e))return;let n=[null,"0","0.0",!1,void 0,""].filter(t=>!e.includes(t));if(Array.isArray(t)&&t.length>0)for(let n=0;n<t.length;n++)if(ActiveQuery.isEmpty(t[n],e))return!0;return!!(n.includes(t)||["string","number"].includes(typeof t)&&n.includes(t.toString().trim()))}static exit(){return this}static keepOn(t){if(0==t.length&&!window.debug)return t}async getPlugin(t){return"string"==typeof t?await import(t):this}on(t=null,e=null){if("string"==typeof t&&"function"==typeof e)switch(t){case"ready":document.addEventListener("DOMContentLoaded",e);break;case"init":window.addEventListener("load",e);break;case"run":window.addEventListener("pageshow",e);break;case"offline":window.addEventListener("offline",e);break;case"online":window.addEventListener("online",e);break;case"close":window.addEventListener("beforeunload",e)}return this}});ActiveQuery.extend&&ActiveQuery.extend("array",{i:{value:function(t=""){return ActiveQuery.isNaN(t)||ActiveQuery.keepOn(this)?this:this[t]}},then:{value:function(t){if("function"==typeof t)return t(this)}},getIndex:{value:function(t,e,n){let i;switch(e){case"==":i=this.findIndex(function(e){return e[t]==n});break;case"=":i=this.findIndex(function(e){return e[t]=n})}return i}},getCount:{value:function(t,e,n){var i=0;switch(e){case"==":for(var r=0;r<this.length;r++)this[r][t]==n&&i++;break;case"===":for(r=0;r<this.length;r++)this[r][t]===n&&i++;break;case"*":for(r=0;r<this.length;r++)this[r][t].includes(n)&&i++;break;default:var s=n.split(e[1]);for(r=0;r<this.length;r++)(this[r][t]===s[0]||this[r][t].includes(n))&&i++}return i}},setSort:{value:function(...t){for(var e=[],n=function(t){e.push({sign:"+"===t[0]||"-"===t[0]?parseInt(t.shift()+1):1,path:t})},i=function(t,e){for(var n=t,i=0,r=e.length;i<r;i++)n=n[e[i]];return n},r=0,s=t.length;r<s;r++)switch(typeof t[r]){case"object":n(t[r]);break;case"string":n(t[r].match(/[+-]|[^.]+/g))}return this.sort(function(t,n){for(var r=0,s=e.length;r<s;r++){if(aVal=i(t,e[r].path),bVal=i(n,e[r].path),aVal>bVal)return e[r].sign;if(aVal<bVal)return-e[r].sign}return 0})}},setItem:{value:function(t,e){return t||e||this.splice(t,0,e),this}},has:{value:function(t,e){for(var n=0;n<this.length;n++)if(this[n][t]===e)return!0;return!1}},getIndexs:{value:function(t,e){for(var n=0;n<this.length;n++)if(this[n][t]===e)return n;return!1}}}),ActiveQuery.extend&&ActiveQuery.extend("element",{parent:{get:function(){return"HTML"===this.parentNode.nodeName?this:this.parentNode}},name:{get:function(){return this.nodeName}},setAttributes:{value:function(t){if(!t)return this;let e,n,i;for(e=[...t],n=e.length,i=0;i<n&&e[i+1];i+=2)this.setAttribute(e[i],e[i+1]);return this}},setAttributeName:{value:function(t){if(ActiveQuery.isEmpty(t))return this;let e,n,i;for(e=[...t],n=e.length,i=0;i<n;i++)this.setAttribute(e[i],"");return this}},removeAttributes:{value:function(t){if(ActiveQuery.isEmpty(t))return this;let e,n,i;for(e=[...t],n=e.length,i=0;i<n;i++)this.removeAttribute(e[i]);return this}},setStyles:{value:function(t){if(ActiveQuery.isEmpty(t))return this;let e,n;e=[...t],n=e.length;for(let t=0;t<n;t++){let n=e[t].replace(" ","").split(":");this.style[n[0]]=n[1]}return this}},getStyles:{value:function(t){if(t){let e,n,i,r,s,u;for(e=[...t],n=!1,i=e.length,1==e[i-1]&&(e.pop(),n=!0),i=e.length,s=[],r=0;r<i;r++)u=n?this.style[e[r]]:window.getComputedStyle(this).getPropertyValue(e[r]),Boolean(u)&&s.push(u);return s}return this}},removeStyles:{value:function(t){if(ActiveQuery.isEmpty(t))return this;let e,n;e=[...t],n=e.length;for(let t=0;t<n;t++)this.style.removeProperty(e[t]);return this}},setClasses:{value:function(t){if(!ActiveQuery.isEmpty(t)){let e,n,i;for(e=[...t],n=e.length,i=0;i<n;i++)this.classList.add(e[i])}return this}},getClasses:{value:function(t){let e,n=this;return ActiveQuery.isEmpty(t)?n.classList.toString().split(" "):(e=[...t],e.every(function(t){return n.classList.contains(t)}))}},removeClasses:{value:function(t){if(!ActiveQuery.isEmpty(t)){let e,n,i;for(e=[...t],n=e.length,i=0;i<n;i++)this.classList.remove(e[i].trim())}return this}},toggleClasses:{value:function(t){return ActiveQuery.isEmpty(t)||this.classList.toggle(t),this}},i:{value:function(){return this}},setChild:{value:function(t){if(Array.isArray(t)){let e,n=t.length;for(e=0;e<n;e++)this.appendChild(t[e])}else this.appendChild(t);return this}},siblings:{value:function(t){let e=this;switch(t){case"next":return e.nextElementSibling;case"prev":return e.previousElementSibling;default:return Array.from(target.parentNode.children).filter(function(t){return t!==e})}}},setAdjacent:{value:function(t,e){if(t||e)return this;switch(t){case"atstart":case"before":this.insertAdjacentElement("beforebegin",e);break;case"atend":case"after":this.insertAdjacentElement("afterend",e);break;case"atbegin":case"first-item":this.insertAdjacentElement("afterbegin",e);break;case"atclose":case"last-item":this.insertAdjacentElement("beforeend",e)}return this}},setHtml:{value:function(t,e=!1){return t?this:e?this.outerHTML=t:this.innerHTML=t}},getHtml:{value:function(t,e=!1){return t?e?this.outerHTML.indexOf(t)>=0:this.innerHTML.indexOf(t)>=0:this.innerHTML}},setContent:{value:function(t){if(Array.isArray(t)){this.innerHTML="";let e,n=t.length;for(e=0;e<n;e++)this.appendChild(t[e])}else this.innerHTML="",this.appendChild(t);return this}},setText:{value:function(t){return t&&(this.textContent=t),this}},getText:{value:function(t){return t?this.textContent.indexOf(t)>=0:this.textContent}},setValue:{value:function(t){return this.value="value"in this&&t?t:"",this}},getValue:{value:function(t,e=!1){return"value"in this&&t?e?e?Boolean(this.value.indexOf(t)):this.value:this.value.indexOf(t)>=0:this}},then:{value:function(t){if("function"==typeof t)return t(this)}},fax:{value:function(){if("FORM"!==this.nodeName)return this}}}),ActiveQuery.extend&&(ActiveQuery.extend("element",{on:{value:function(t,e){return"string"!=typeof t||"function"!=typeof e||this.addEventListener(t,e),this}}}),ActiveQuery.extend("document",{on:{value:function(t,e){return"string"!=typeof t||"function"!=typeof e||this.addEventListener(t,e),this}}}),ActiveQuery.extend("window",{on:{value:function(t,e){return"string"!=typeof t||"function"!=typeof e||this.addEventListener(t,e),this}}})),ActiveQuery.extend&&ActiveQuery.extend("function",{then:{value:function(t){if("function"==typeof t)return t(this)}}}),ActiveQuery.extend&&ActiveQuery.extend("nodelist",{parent:{get:function(){return this}},name:{get:function(){return this}},setAttributes:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,r=0;r<n;r++)for(s=0;s<i&&e[s+1];s+=2)this[r].setAttribute(e[s],e[s+1]);return this}},setAttributeName:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,r=0;r<n;r++)for(s=0;s<i;s++)this[r].setAttribute(e[s],"");return this}},removeAttributes:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,r=0;r<i;r++)for(s=0;s<n;s++)this[s].removeAttribute(e[r]);return this}},setStyles:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,s=0;s<i;s++){let t=e[s].replace(" ","").split(":");for(r=0;r<n;r++)this[r].style[t[0]]=t[1]}return this}},getStyles:{value:function(){}},removeStyles:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,s=0;s<i;s++)for(r=0;r<n;r++)this[r].style.removeProperty(e[s]);return this}},setClasses:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,r=0;r<n;r++)for(s=0;s<i;s++)this[r].classList.add(e[s]);return this}},getClasses:{value:function(){return this}},removeClasses:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n,i,r,s;for(e=[...t],n=this.length,i=e.length,r=0;r<n;r++)for(s=0;s<i;s++)this[r].classList.remove(e[s]);return this}},toggleClasses:{value:function(t){if(ActiveQuery.keepOn(this)||ActiveQuery.isEmpty(t))return this;let e,n;for(e=this.length,n=0;n<e;n++)this[n].classList.toggle(t.trim());return this}},i:{value:function(t=""){return isNaN(t)||ActiveQuery.keepOn(this)?this:this[t]}},setChild:{value:function(){return this}},siblings:{value:function(t){if(ActiveQuery.keepOn(this))return this;let e=this[0];if("next"===t)return e[0].nextElementSibling;{let t=e[0];return Array.from(t.parentNode.children).filter(function(t){return t!==e})}}},setAdjacent:{value:function(){return this}},setHtml:{value:function(){return this}},getHtml:{value:function(){return this}},setContent:{value:function(){return this}},setText:{value:function(){return this}},getText:{value:function(){return this}},setValue:{value:function(t){if(ActiveQuery.keepOn(this))return this;let e,n;for(e=this.length,n=0;n<e;n++)"value"in this[n]&&(this[n].value=t||"");return this}},getValue:{value:function(){return this}},then:{value:function(t){if("function"==typeof t)return t(this)}},on:{value:function(t,e){if(ActiveQuery.isEmpty(t)||ActiveQuery.isEmpty(e))return;let n,i=this.length;for(n=0;n<i;n++)this[n].addEventListener(t,e);return this}},fax:{value:function(){return this}}}),ActiveQuery.extend&&ActiveQuery.extend("number",{trim:{value:function(t=null){if("number"!=typeof this)return this;let e=this,n=[" ","\n","\r","\t","\f","\v"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),i=0,r=0;for(e+="",t&&(n=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),i=e.length,r=0;r<i;r++)if(-1===n.indexOf(e.charAt(r))){e=e.substring(r);break}for(i=e.length,r=i-1;r>=0;r--)if(-1===n.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===n.indexOf(e.charAt(0))?e:""}}}),ActiveQuery.extend&&ActiveQuery.extend("object",{setValues:{value:function(t,e,n=!1){return ActiveQuery.isNaO(this)||t||e?this:n||!this[t]?(this[t]=e,this):void 0}},hasValues:{value:function(t){return ActiveQuery.isNaO(this)||t?this:this[t]}}}),ActiveQuery.extend&&ActiveQuery.extend("string",{trim:{value:function(t=null){if("string"!=typeof this)return this;let e=this,n=[" ","\n","\r","\t","\f","\v"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),i=0,r=0;for(e+="",t&&(n=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),i=e.length,r=0;r<i;r++)if(-1===n.indexOf(e.charAt(r))){e=e.substring(r);break}for(i=e.length,r=i-1;r>=0;r--)if(-1===n.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===n.indexOf(e.charAt(0))?e:""}}}),ActiveQuery.extend&&(Element.prototype.sancha,ActiveQuery.extend("element",{sancha:{value:function(t){if(!t)return this;let e=t||{};if(e.static)return e.template?e.template=e.template:e.template=this.innerHTML,e.swap?this.innerHTML=e.template:this.insertAdjacentHTML("beforeend",e.template),this;if(!e.data||e.data.length<1||void 0===e.data)return this.insertAdjacentHTML("beforeend","No Data found"),this;e.template?e.template=e.template:e.template=this.innerHTML;let n="";for(e.list=e.template.match(/([^}{]+)(?=})/g),e.mapping={},e.vap={},ii=0;ii<e.data.length;ii++){for(e.variable&&e.variable(this,e.data,e.template),i=0;i<e.list.length;i++)e.list[i].includes("$")?e.vap["{{".concat(e.list[i],"}}")]=variables[e.list[i].replace("$","")]:e.mapping["{{".concat(e.list[i],"}}")]=e.data[ii][e.list[i]];n+=e.template.replace(/\{{\w+\}}/g,function(t){return e.mapping[t]}).replace(/\{{\$\w+\}}/g,function(t){return e.vap[t]})}return e.swap?this.innerHTML=n:this.insertAdjacentHTML("beforeend",n),e.then&&"function"==typeof e.then&&e.then(),this}}}),NodeList.prototype.sancha||ActiveQuery.extend("nodelist",{sancha:{value:function(){return this}}}),Object.prototype.sancha||ActiveQuery.extend("object",{sancha:{value:function(){return this}}})),ActiveQuery.extend&&(Element.prototype.sift||ActiveQuery.extend("element",{sift:{value:function(t){if(t)return this;let e,n,i,r,s,u;return e=this,e.onkeyup=function(){if(s="INPUT"===e.tagName?e.value.toUpperCase():e.textContent.toUpperCase(),""===s.trim())return e;if(n=document.querySelectorAll(t),i=n.length,"*"==s.trim()){for(r=0;r<i;r++)n[r].classList.remove("hide");return e}for(r=0;r<i;r++)u=n[r].getAttribute("sift")||n[r].textContent||n[r].innerText,u.toUpperCase().indexOf(s.trim())>-1?n[r].classList.remove("hide"):n[r].classList.add("hide")},e}}}),NodeList.prototype.sift||ActiveQuery.extend("nodelist",{sift:{value:function(){return this}}}),Object.prototype.sift||ActiveQuery.extend("object",{sift:{value:function(){return this}}})),ActiveQuery.extend&&(Element.prototype.watch||(MutationObserver||function(t){window.MutationObserver=window.MutationObserver||function(t){"use strict";function e(t){this._watched=[],this._listener=t}function n(t){!function n(){var i=t.takeRecords();i.length&&t._listener(i,t),t._timeout=setTimeout(n,e._period)}()}function i(e){var n={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(var i in e)f(n,i)&&e[i]!==t&&(n[i]=e[i]);return n}function r(t,e){var n=a(t,e);return function(r){var o,c=r.length;e.charData&&3===t.nodeType&&t.nodeValue!==n.charData&&r.push(new i({type:"characterData",target:t,oldValue:n.charData})),e.attr&&n.attr&&s(r,t,n.attr,e.afilter),(e.kids||e.descendents)&&(o=u(r,t,n,e)),(o||r.length!==c)&&(n=a(t,e))}}function s(t,e,n,r){for(var s,u,a={},o=e.attributes,c=o.length;c--;)u=(s=o[c]).name,r&&!f(r,u)||(p(e,s)!==n[u]&&t.push(i({type:"attributes",target:e,attributeName:u,oldValue:n[u],attributeNamespace:s.namespaceURI})),a[u]=!0);for(u in n)a[u]||t.push(i({target:e,type:"attributes",attributeName:u,oldValue:n[u]}))}function u(e,n,r,u){function a(t,n,r,a,o){for(var c,h,f,d=t.length-1,p=-~((d-o)/2);f=t.pop();)c=r[f.i],h=a[f.j],u.kids&&p&&Math.abs(f.i-f.j)>=d&&(e.push(i({type:"childList",target:n,addedNodes:[c],removedNodes:[c],nextSibling:c.nextSibling,previousSibling:c.previousSibling})),p--),u.attr&&h.attr&&s(e,c,h.attr,u.afilter),u.charData&&3===c.nodeType&&c.nodeValue!==h.charData&&e.push(i({type:"characterData",target:c,oldValue:h.charData})),u.descendents&&l(c,h)}function l(n,r){for(var d,p,v,y,g,b,m,A=n.childNodes,O=r.kids,x=A.length,Q=O?O.length:0,j=0,L=0,N=0;L<x||N<Q;)(b=A[L])===(m=(g=O[N])&&g.node)?(u.attr&&g.attr&&s(e,b,g.attr,u.afilter),u.charData&&g.charData!==t&&b.nodeValue!==g.charData&&e.push(i({type:"characterData",target:b,oldValue:g.charData})),p&&a(p,n,A,O,j),u.descendents&&(b.childNodes.length||g.kids&&g.kids.length)&&l(b,g),L++,N++):(f=!0,d||(d={},p=[]),b&&(d[v=c(b)]||(d[v]=!0,-1===(y=o(O,b,N))?u.kids&&(e.push(i({type:"childList",target:n,addedNodes:[b],nextSibling:b.nextSibling,previousSibling:b.previousSibling})),j++):p.push({i:L,j:y})),L++),m&&m!==A[L]&&(d[v=c(m)]||(d[v]=!0,-1===(y=h(A,m,L))?u.kids&&(e.push(i({type:"childList",target:r.node,removedNodes:[m],nextSibling:O[N+1],previousSibling:O[N-1]})),j--):p.push({i:y,j:N})),N++));p&&a(p,n,A,O,j)}var f;return l(n,r),f}function a(t,e){var n=!0;return function t(i){var r={node:i};return!e.charData||3!==i.nodeType&&8!==i.nodeType?(e.attr&&n&&1===i.nodeType&&(r.attr=l(i.attributes,function(t,n){return e.afilter&&!e.afilter[n.name]||(t[n.name]=p(i,n)),t},{})),n&&(e.kids||e.charData||e.attr&&e.descendents)&&(r.kids=function(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i,t);return n}(i.childNodes,t)),n=e.descendents):r.charData=i.nodeValue,r}(t)}function o(t,e,n){return h(t,e,n,"node")}function c(t){try{return t.id||(t[y]=t[y]||v++)}catch(e){try{return t.nodeValue}catch(t){return v++}}}function l(t,e,n){for(var i=0;i<t.length;i++)n=e(n,t[i],i,t);return n}function h(t,e,n,i){for(;n<t.length;n++)if((i?t[n][i]:t[n])===e)return n;return-1}function f(e,n){return e[n]!==t}e._period=30,e.prototype={observe:function(t,e){for(var i={attr:!!(e.attributes||e.attributeFilter||e.attributeOldValue),kids:!!e.childList,descendents:!!e.subtree,charData:!(!e.characterData&&!e.characterDataOldValue)},s=this._watched,u=0;u<s.length;u++)s[u].tar===t&&s.splice(u,1);e.attributeFilter&&(i.afilter=l(e.attributeFilter,function(t,e){return t[e]=!0,t},{})),s.push({tar:t,fn:r(t,i)}),this._timeout||n(this)},takeRecords:function(){for(var t=[],e=this._watched,n=0;n<e.length;n++)e[n].fn(t);return t},disconnect:function(){this._watched=[],clearTimeout(this._timeout),this._timeout=null}};var d=document.createElement("i");d.style.top=0;var p=(d="null"!=d.attributes.style.value)?function(t,e){return e.value}:function(t,e){return"style"!==e.name?e.value:t.style.cssText},v=1,y="mo_id";return e}(void 0)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),ActiveQuery.extend("element",{watch:{value:function(t){var e,n,i,r;return n=(e=t||{}).element||this,r=new MutationObserver(function(t){t.forEach(function(t){this.watched=t.target,e.then()})}),i={subtree:e.subtree||!1,attributes:e.attribute||!1,childList:e.children||!1,characterData:e.values||!1,attributeFilter:e.filter},r.observe(n,i)}}})),NodeList.prototype.watch||ActiveQuery.extend("nodelist",{watch:{value:function(){return this}}}),Object.prototype.watch||ActiveQuery.extend("object",{watch:{value:function(){return this}}}));